<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:list-style="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>검색하기</title>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.2.0/css/all.min.css" integrity="sha512-6c4nX2tn5KbzeBJo9Ywpa0Gkt+mzCzJBrE1RB6fmpcsoN+b/w/euwIMuQKNyUoU/nToKN3a8SgNOtPrbW12fug==" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
</head>

<body>
<nav class="navbar my_navbar">
    <div class="p-3 d-flex">
        <button type="button" class="btn btn-white" onClick="location.href='/'"><i class="arrow left"></i></button>
        <span class="page_title text-left fw-bold">검색하기</span>
    </div>
</nav>

<div class="contents">
    <!--- 검색창 -->
    <section class="mt-5 mb-5" id="s">
        <form id="searchForm" action="/search/result" method="get" class="search-bar m-3">
            <label>검색어를 입력하세요</label>
            <div><input type="text" class="input" name="text"></div>

            <!-- 필터 -->
            <section class="m-3" >
                <label>키워드를 선택하세요</label>
                <div class="filter-wrapper d-flex flex-wrap">
                    <div class="filter">
                        <input type="checkbox" class="btn-check" id="check1" autocomplete="off" value="1" onchange="makeFilter(this);">
                        <label class="btn btn-outline-secondary" for="check1">조용함</label>
                    </div>
                    <div class="filter">
                        <input type="checkbox" class="btn-check" id="check2" autocomplete="off" value="2" onchange="makeFilter(this);">
                        <label class="btn btn-outline-secondary" for="check2">공부하기좋은분위기</label>
                    </div>
                    <div class="filter">
                        <input type="checkbox" class="btn-check" id="check3" autocomplete="off" value="3" onchange="makeFilter(this);">
                        <label class="btn btn-outline-secondary" for="check3">콘센트</label>
                    </div>
                    <div class="filter">
                        <input type="checkbox" class="btn-check" id="check4" autocomplete="off" value="4" onchange="makeFilter(this);">
                        <label class="btn btn-outline-secondary" for="check4">자리편함</label>
                    </div>
                    <div class="filter">
                        <input type="checkbox" class="btn-check" id="check5" autocomplete="off" value="5" onchange="makeFilter(this);">
                        <label class="btn btn-outline-secondary" for="check5">공간넓음</label>
                    </div>
                    <div class="filter">
                        <input type="checkbox" class="btn-check" id="check6" autocomplete="off" value="6" onchange="makeFilter(this);">
                        <label class="btn btn-outline-secondary" for="check6">맛있는메뉴</label>
                    </div>
                </div>
            </section>
            <!-- 검색버튼 -->
            <div class="mt-5" id="search_btn">
                <input type="hidden" id="filters" name="filters" value="111111">
                <button class="btn btn-secondary mt-5 ms-3" type="submit">검색</button>
            </div>

        </form>
    </section>
</div>
<!---필터확인용, 기능과 무관함
<br>
필터입력값 : <input type="text" id="showFilter"/>
-->
<script>
    var filterArr = ["0","0","0","0","0","0"]; //필터 내용을 저장하는 배열
    //var showFilterValue = document.getElementById("showFilter"); //필터입력값 보여주기 위한 text
    var result = document.getElementById('filters');

    //필터 내용을 저장하는 함수
    function makeFilter(target){
        let filterVal = target.value; //선택된 checkbox의 value를 받아옵니다
        let confirmCheck = target.checked; //선택된 checkbox의 check 여부를 받아옵니다
        console.log("필터 선택값 : "+filterVal);
        console.log("선택여부 : "+confirmCheck);

        if(confirmCheck == true){
            console.log("check");
            //filterArr.push(filterVal); // check value filter 배열에 입력
            filterArr[filterVal-1] = 1; // check value filter 배열에 입력

        }else{
            //filterArr.splice(filterArr.indexOf(filterVal), 1); //배열내용 삭제: 배열.splice(삭제하고싶은 요소의 index, 삭제하고자하는 갯수)
            filterArr[filterVal-1] = 0;
        }

        //showFilterValue.value = filterArr; // textBox에 필터 배열 추가
        console.log("필터입력값 출력 : "+filterArr);
        result.value = filterArr.join("");
    }

</script>
</body>
</html>